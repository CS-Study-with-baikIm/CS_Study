# CPU 스케줄링이란?
 프로세스는 생성되고 난 뒤 여러 상태를 거치게 된다. 운영체제의 CPU 스케줄러는 Ready 상태의 프로세스 중에서 어떤 프로세스에게 CPU를 할당할지 결정합니다. 이를 CPU 스케줄링이라 하는 것이죠. 또한 Dispatcher는 CPU 제어권을 CPU 스케줄러에 의해 선택된 프로세스에게 넘긴다. 이를 Context Switch라고 한다.
 
 
## CPU 스케줄링의 목적
 CPU 스케줄링의 목적은 모든 프로세스가 적당히, 공평하게, 효율적으로 자원을 할당받는 것.

공평성 : 프로세스에게 자원을 배분하는 과정이 공평해야 한다.
효율성 : 시스템 자원이 쉬는 시간이 없어야 한다.
안정성 : 중요 프로세스들은 우선권을 주어야 한다. 또한 프로세스가 증가해도 안정적으로 돌아가야 한다.
확장성 : 시스템 자원이 늘어나는 경우 이 혜택이 시스템에 반영되야 한다.
반응 시간 보장 : 프로세스의 요구가 있을 경우 적절한 시간 안에 반응을 해줘야 한다.
무한 연기 방지 : 특정 프로세스의 작업이 무한정 연기되면 안 된다.


## 스케줄링 시 고려사항

1) 선점형 스케줄링과 비선점형 스케줄링
  선점(preemptive)이란 '빼앗을 수 있음'을 말한다. 즉, 선점과 비선점 스케줄링 방식은 어떤 프로세스가 CPU를 할당받으면 이를 운영체제가 강제로 회수할 수 있는 스케줄링 방식인지, 아닌지에 대한 내용이다.
 

(1) 선점형 스케줄링
 선점형 스케줄링의 경우 운영체제가 필요하다고 판단하면 실행 상태에 있는 프로세스의 작업을 중단시키고 새로운 작업을 시작할 수 있다. Timeout 상황, I/O Interrupt, System call 등이 발생한 경우 현재 실행 상태에 있는 프로세스의 CPU를 강제로 회수하고 다른 프로세스에게 CPU를 할당해줄 수 있는 스케줄링 방식.
 

 선점형 스케줄링은 Context switch로 인한 오버헤드가 발생한다. 그러나 하나의 프로세스가 CPU를 독점한다는 것은 동시에 여러 작업을 할 수 없다는 의미이므로 대부분의 저수준 스케줄러는 선점형 스케줄링 방식을 사용힌다.  
 

(2) 비선점형 스케줄링
 비선점형 스케줄링의 경우 어떤 프로세스가 실행 상태에 들어가면 그 프로세스가 끝나거나 CPU를 자진 반납하는 경우가 아니면 계속 실행되는 것을 말한다. 이는 Context switch에 대한 오버헤드도 없고 스케줄러가 할 일도 적어져 효율적일 수 있으나 전체 시스템의 처리율이 떨어지게 된다.


2) 프로세스 우선순위
 프로세스 간에도 우선순위가 존재할 수 있다. 프로세스는 크게 커널 프로세스와 일반 프로세스로 나뉘는데 CPU 스케줄러는 보통 커널 프로세스를 높은 우선순위에 둔다. 커널과 관련된 작업들은 보통 일반 프로세스보다 중요하기 때문. 여기서 우선순위가 높다는 것은 일반적으로 더 빨리 자주 실행된다는 의미이다. 시스템 자원을 더 많이 받는다는 것
 

 일반 프로세스 간에도 우선순위가 존재한다.  비디오 플레이어와 워드 작업이 같은 우선순위라면 실시간으로 영상을 출력해야 하는 비디오 플레이어가 끊기고 만다. 이러한 문제 해결을 위해서는 일반 프로세스 간에도 우선순위를 매겨야 한다는 사실이 합리적임을 알 수 있다.


3) CPU bound process와 IO bound process
 이전 글에서도 살펴봤듯 프로세스에는 여러 상태가 있다. 이때 실제 작업이 일어나는 것은 실행 상태와 대기 상태이다. CPU를 사용하는 실행 상태와 입출력을 요청하여 완료되기를 기다리는 대기상태. 이때 CPU를 할당받아 실행하는 작업을 CPU 버스트, 입출력 작업을 I/O 버스트라고 한다.


위에서 언급한 작업 형태에 따라 CPU 버스트가 많은 프로세스를 CPU bound process, I/O 버스트가 많은 프로세스를 IO bound process라고 한다. 두 프로세스 간에는 IO bound process를 먼저 실행상태로 옮기는 것이 효율적이다. IO bound process의 경우 CPU를 할당받아도 금방 대기 상태로 빠지는 반면 CPU bound process의 경우 할당받은 CPU 시간을 전부 사용하는 경우가 많기 때문.
 

따라서 스케줄링 시 IO bound process의 우선순위를 CPU bound process보다 높이는 것이 시스템 효율 향상에 도움이 된다.

4) 전면 프로세스와 후면 프로세스
 전면 프로세스는 GUI를 사용하는 OS에서 화면 맨 앞에 놓인 프로세스를 말한다. 아마 이 글을 읽고 계신 분들은 브라우저를 통해 제 글을 읽고 계실 테니 브라우저가 전면 프로세스일 것. 전면 프로세스는 현재 입출력을 사용하는 프로세스이며 사용자와 상호작용이 가능하ㅏ다. 그에 반해 후면 프로세스는 사용자와 상호작용이 없는 프로세스이다. 압축 프로그램 같은 것이 대표적인 예시가 될 수 있다.
 
 두 프로세스의 우선순위를 생각해자면 전면 프로세스는 사용자의 요구를 즉각 반응해야 하지만 후면 프로세스는 상호작용이 없다. 따라서 전면 프로세스에 우선순위를 더 높게 쳐주는 것이 합리적이다. 즉, 전면 프로세스가 후면 프로세스보다 CPU를 할당받을 확률이 높다.
