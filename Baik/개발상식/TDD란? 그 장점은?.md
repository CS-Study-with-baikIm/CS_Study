# TDD(Test Driven Development) 란? 

TDD란 Test Driven Development의 약자로 '테스트 주도 개발'이라고 한다. 

반복 테스트를 이용한 소프트웨어 방법론으로, 작은 단위의 테스트 케이스를 작성하고 이를 통과하는 코드를 추가하는 단계를 반복하여 구현한다.
 

짧은 개발 주기의 반복에 의존하는 개발 프로세스이며, 
애자일 방법론 중 하나인 eXtream Programming(XP)의 'Test-First' 개념에 기반을 둔 단순한 설계를 중요시한다. 

>  eXtream Programming(XP) : 미래에 대한 예측을 최대한 하지 않고, 지속적으로 프로토타입을 완성하는 애자일 방법론 중 하나이다. 이 방법론은 추가 요구사항이 생기더라도, 실시간으로 반영할 수 있다.

![TDD 이미지](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbxIJOW%2FbtrNRBF83uo%2FtNXUTRCyj44P8xxwdk7kx1%2Fimg.webp)   

테스트 주도 개발은 다음과 같은 개발 절차를 가진다

- RED ( Write a failing test ) : 실패하는 테스트 코드를 먼저 작성한다.
- GREEN ( Make the test pass ): 테스트 코드를 성공시키기 위한 실제 코드를 작성한다.
- BLUE ( Refactor ) : 중복 코드 제거, 테스트 통과 유지 등의 리팩토링을 수행한다.

### 코드 중심 개발

코드 중심 개발은 테스트하기도 전에 코드를 다 개발하고 마지막에 테스트를 거치므로, 마지막 단계인 테스트가 실패하면
다시 처음부터 설계하고 다시 코드 개발을 하고 테스트를 하는 비효율적이고 테스트 비용이 증가할 수 도 있다.
왜냐하면 세상에 어떤 것이든 처음 부터 완벽한 것은 없기 때문이다.
또한, 고객의 요구사항이 추가 된다거나 오류 등으로 재설계를 할때 코드를 삽입, 수정, 삭제하는 과정에서 불필요한 코드가 남거나 중복이 될 위험성도 존재한다.
  

### 테스트 주도 개발

1. 설계 단계에서 프로그래밍 목적을 반드시 미리 정의하고, 테스트해야할 테스트 케이스를 작성해야한다.
2. 테스트 코드단계에서 테스트 코드를 작성하는 도중 오류나 수정할 부분이 생기면 테스트 케이스에 추가하고 다시 설계를 개선한다.
3. 마지막으로 테스트가 통과된 코드만을 코드 개발 단계에서 실제 코드로 작성한다.

> 즉, 테스트 주도 개발 방식을 통해 반복적으로 코드를 테스트하며 코드의 오류를 줄이고 소스코드를 더욱 간결하게 만들수 있으며
테스트 케이스 작성으로 인해 자연스럽게 설계가 개선됨으로써 재설계 시간이 절감된다.

## TDD 개발의 장점

- 보다 튼튼한 객체 지향적인 코드 생산

TDD는 코드의 재사용 보장을 명시하므로 TDD를 통한 소프트웨어 개발 시 기능별 철저한 모듈화가 이뤄진다.
이는 종속성과 의존성이 낮은 모듈로 조합된 소프트웨어 개발을 가능하게 하며 필요에 따라 모듈을 추가하거나 제거해도 소프트웨어 전체 구조에 영향을 미치치 않는다.
 

- 추가 구현의 용의함

개발이 완료된 소프트웨어에 어떤 기능을 추가할 때 가장 우려되는 점은 해당 기능이 기존 코드에 어떤 영향을 미칠지 알지 못한다. 
하지만 TDD의 경우 자동화된 유닛 테스팅을 전제하므로 테스트 기간을 획기적으로 단축시킬 수 있다.
 

- 높은 코드 안정성

짧은 주기의 테스트 코드 개발-리팩토링 단계를 거치며 끊임 없이 보완하고 철저한 모듈화를 통해 종속성과 의존성이 낮은 모듈로 조합된 소프트웨어 개발을 가능하게 하여 코드의 안정성을 높일 수 있다.
 

- 재설계 시간의 단축

TDD는 설계 단계에서 테스트 코드를 먼저 작성하기 때문에 무엇을 해야하는 지 정의하고 생각할 수 있어 완성도 높은 설계로 이어집니다.이는 개발 진행 중 소프트웨어의 전반적인 설계가 변경되는 일을 방지할 수 있다.
 

- 디버깅 시간의 단축

모듈 별로 테스트를 자동화를 하지 않는다면 에러가 생겼을 경우 모든 레벨의 코드를 살펴봐야한다.
하지만 TDD의 경우 자동화 된 유닛 테스팅을 전제하므로 특정 버그를 손 쉽게 찾아낼 수 있다.

 
## 단점

- 기존 방식에 적응 되어 버려 개발 방식을 바꾸기 어려움

이미 기존 코드 중심 개발으로 오랜 시간 개발을 해온 개발자들은 기존과 다른 방식인 TDD로 개발 방식을 바꾸긴 어려울 것입니다.
하지만 오히려 개발을 별로 해보진 않은 신입 개발자들은 적용하기 쉬울 것 이다.
 

- 생산성 저하

한 번 개발할 코드를 처음부터 2개의 코드를 짜야하고 중간중간 테스트를 하면서 고쳐나가야하기 때문에 일반적인 개발 방식보다 개발 시간이 늘어날 수 밖에 없다.
TDD 개발 방식은 일반적인 개발 방식에 비해 시간이 대략 10 ~ 30% 정도 늘어난다고 한다.
SI 프로젝트에서는 소프트웨어 품질보다는 납기일 준수가 중요해 TDD 방식을 잘 사용하지 않다.
또 단순 개발이나 소규모 프로젝트의 경우 개발기간이 짧아 TDD를 적용하게 되었을 때 Ctrl + C, Ctrl + V를 통한 뻔하고 중복된 테스트 코드를 작성했을 때는 비효율적일 수 있다.

## 좋은 테스트 코드를 위한 규칙


### FIRST

- Fast: 목표한 기능을 빠르게 검증할 수 있어야 한다.
- Independent: 테스트의 단위는 다른 테스트와 독립적이어야 한다. 순수하게 목표한 기능만 테스트다.
- Repeatable: 반복적으로 테스트를 수행해도 동일한 결과를 얻을 수 있어야 한다.
- Self-validating: 스스로 검증할 수 있어야 한다.
- Timely: 실시간으로 검증할 수 있어야 한다.


### Right-BICEP

- Right: 결과가 올바른지 판단할 수 있어야 한다.
- Boundary: 모든 경계(Boundary) 조건이 일치해야 한다.
- Inverse: 역(Inverse) 관계를 확인할 수 있어야 한다.
- Cross-check: 다른 수단을 사용하여 결과를 교차 확인(Cross-check) 할 수 있어야 한다.
- Error condition: 에러 조건(Error condition)을 강제로 만들 수 있어야 한다.
- Performance: 성능(Performance) 특성이 한도 내에 있어야 한다.


## 결론

그동안 개발을 해보면서 TDD를 배워도 적용해서 개발을 진행한 적이 없었다. 막상 개발을 진행하려니 일이 늘어나는 느낌이고 기한이 없이 진행하거나 팀개발로 진행하지 않는 경우도 많으니 TDD를 적용하기에 무리가 있었다.

그렇기에 에러 수정에 많은 시간을 소요하고 개발을 완료한 후에도 리팩토링 과정에서 발생한 에러로 더 많은 시간을 소요하는 일이 많았다. TDD는 이런 부분에서 에러 수정과 유지보수에 유리하고 안정석이 확보되는 개발 방법이라 개념과 방법을 이해하고 여유가 있는 경우에 시도해볼 필요성이 있는 방법이라는 생각이 든다.
